<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Text-to-Speech Example</title>
</head>
<body>
  <h1>Text-to-Speech Example</h1>
  <textarea id="text-to-speech"></textarea>
  <label for="voice-select">Select a voice:</label>
  <select id="voice-select"></select>
  <button id="speak-button">Speak</button>

  <script>
    // Get the DOM elements
    const textToSpeech = document.getElementById('text-to-speech');
    const voiceSelect = document.getElementById('voice-select');
    const speakButton = document.getElementById('speak-button');

    // Initialize the SpeechSynthesis API
    const synth = window.speechSynthesis;

    // Populate the voice select dropdown with available voices
    const voices = synth.getVoices();
    voices.forEach((voice) => {
      const option = document.createElement('option');
      option.text = `${voice.name} (${voice.lang})`;
      option.value = voice.lang;
      voiceSelect.add(option);
    });

    // Define the event listener for the speak button
    speakButton.addEventListener('click', () => {
      // Create a new SpeechSynthesisUtterance object
      const utterance = new SpeechSynthesisUtterance(textToSpeech.value);

      // Get the selected voice from the dropdown
      const selectedVoice = voices.find((voice) => voice.lang === voiceSelect.value);
      utterance.voice = selectedVoice;

      // Set the speech settings
      utterance.pitch = 1.0;
      utterance.rate = 1.0;

      // Add pauses for punctuation
      utterance.text = utterance.text.replace(/[.,!?]/g, (match) => `${match} `);

      // Normalize text for better pronunciation
      utterance.text = utterance.text.replace(/don't/g, 'do not');
      utterance.text = utterance.text.replace(/can't/g, 'cannot');
      utterance.text = utterance.text.replace(/won't/g, 'will not');

      // Speak the text
      synth.speak(utterance);
    });
  </script>
</body>
</html>